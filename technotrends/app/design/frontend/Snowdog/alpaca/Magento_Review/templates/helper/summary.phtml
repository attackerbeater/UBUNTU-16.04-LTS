<?php $url = $block->getReviewsUrl() . '#reviews'; ?>
<?php $urlForm = $block->getReviewsUrl() . '#review-form'; ?>

<div class="review review--summary">
    <?php if ($block->getReviewsCount()): ?>
        <?php
            $rating = $block->getRatingSummary();
            $reviewsCount = $block->getReviewsCount();
        ?>
        <?php if ($rating): ?>
            <div class="review__summary-handle">
                <div
                    class="rating"
                    aria-label="<?= __('Average rating') . ': ' . $rating . '%'; ?>"
                    title="<?= __('Average rating') . ': ' . $rating . '%'; ?>"
                    tabindex="0"
                >
                    <div
                        class="rating__star"
                        role="presentation"
                        style="width:<?=  $rating; ?>%"
                    >
                        <span class="rating__indicator"></span>
                    </div>
                </div>

                <a
                    href="<?= $url ?>"
                    class="review__amount"
                    title="<?= $reviewsCount . __(' reviews'); ?>"
                    data-mage-init='{ "goToReview": { "reviewId": "reviews" } }'
                    aria-label="<?= __('See ') . $reviewsCount . __(' reviews'); ?>"
                >
                    (<?= $block->getReviewsCount() ?>)
                </a>
                <span class="review__amount-text">
                    <?= $reviewsCount . __(' Reviews'); ?>
                </span>
                <a
                    href="<?=  $urlForm ?>"
                    title="<?=  __('Add Your Review') ?>"
                    class="review__summary-add"
                    data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
                >
                    <?=  __('Add Your Review') ?>
                </a>
            </div>
        <?php endif; ?>
    <?php elseif ($block->getDisplayIfEmpty()): ?>
        <a
            href="<?=  $urlForm; ?>"
            title="<?=  __('Be the first to review this product') ?>"
            data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
        >
            <?=  __('Be the first to review this product') ?>
        </a>
    <?php endif; ?>
</div>
